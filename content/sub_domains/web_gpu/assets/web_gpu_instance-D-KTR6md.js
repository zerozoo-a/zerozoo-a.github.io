var l=Object.defineProperty;var d=(s,r,i)=>r in s?l(s,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[r]=i;var n=(s,r,i)=>(d(s,typeof r!="symbol"?r+"":r,i),i);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}})();class f{constructor(){n(this,"wgls");n(this,"canvasRef");n(this,"canvas");n(this,"adapter",null);n(this,"context",null);n(this,"device",null);n(this,"isInitialized",!1)}async init(r){var i,c;try{const e=document.getElementById(r);if(!e)throw Error("canvas is required");this.canvas=e;const t=await navigator.gpu.requestAdapter();if(!t)throw Error("navigator gpu");this.adapter=t;const o=await t.requestDevice();this.device=o;const a=e.getContext("webgpu");if(this.context=a,!e||!a||!o)throw Error("canvas, context, device is required")}catch(e){console.error(e);const t=document==null?void 0:document.createElement("div");t.innerText=`${e}`,t.id=r,(c=(i=this.canvas)==null?void 0:i.parentElement)==null||c.replaceChild(t,this.canvas),this.canvas=this.adapter=this.context=this.device=null}finally{this.isInitialized=!0}}}export{f as W};
